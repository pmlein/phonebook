(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){},18:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(17),r=n.n(o),l=(n(11),n(4)),i=n(5),u=n(7),c=n(6),h=n(8),m=n(2),f=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("ul",null,this.props.persons.map(function(t){return s.a.createElement("li",{key:t._id},t.name," ",t.number,s.a.createElement("button",{onClick:e.props.deletePerson(t._id,t.name)},"Poista"))}))}}]),t}(s.a.Component),d=function(e){var t=e.message;return null===t?null:s.a.createElement("div",{className:"msg"},t)},p=n(3),g=n.n(p),v="/api/persons",w={getAll:function(){return g.a.get(v).then(function(e){return e.data})},create:function(e){return g.a.post(v,e).then(function(e){return e.data})},update:function(e,t){return g.a.put(v+"/".concat(e),t).then(function(e){return e.data})},del:function(e,t){if(window.confirm("Do you really want to delete ".concat(t,"?")))return g.a.delete(v+"/".concat(e)).then(function(e){console.log("Poisto ")}).catch(function(e){console.log(e)})}},E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).deletePerson=function(e,t){return function(){var a=n.state.persons.filter(function(t){return t.id!==e});console.log("deletePerson funktiossa: ",a),console.log("ID: ",e),w.del(e,t).then(function(t){var a=n.state.persons.filter(function(t){return t.id!==e});n.setState({persons:a})})}},n.nameExists=function(e){var t=n.state.persons.filter(function(t){return t.name===e});return t.length>0?t[0].id:null},n.addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newPhone};null===n.nameExists(n.state.newName)?w.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newPhone:"",msg:"Henkil\xf6 lis\xe4tty!"}),setTimeout(function(){n.setState({msg:null})},5e3)}):window.confirm("Nimi ".concat(n.state.name," on jo luetttelossa, korvataanko numero?"))&&w.update(n.state.id,t).then(function(e){n.setState({persons:n.state.persons,newName:"",newPhone:""})})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handlePhoneChange=function(e){n.setState({newPhone:e.target.value})},n.handleFilterChange=function(e){n.setState({filterFind:e.target.value})},n.filterPersons=function(e){e.preventDefault(),""!==n.state.filterFind?n.setState({showAll:!1}):n.setState({showAll:!0,filterFind:""})},n.state={persons:[],newName:"",newPhone:"",showAll:!0,filterFind:"",msg:null},n.deletePerson=n.deletePerson.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.showAll?this.state.persons:this.state.persons.filter(function(t){return t.name.startsWith(e.state.filterFind)});return s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo"),s.a.createElement(d,{message:this.state.msg}),s.a.createElement("form",{onSubmit:this.filterPersons},"Rajaa n\xe4ytett\xe4vi\xe4: ",s.a.createElement("input",{value:this.state.filterFind,onChange:this.handleFilterChange})),s.a.createElement("h3",null,"Lis\xe4\xe4 uusi yhteystieto"),s.a.createElement("form",{onSubmit:this.addPerson},s.a.createElement("div",null,"Nimi: ",s.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),s.a.createElement("div",null,"Puhelin: ",s.a.createElement("input",{value:this.state.newPhone,onChange:this.handlePhoneChange})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),s.a.createElement("h2",null,"Numerot"),s.a.createElement(f,{persons:t,deletePerson:this.deletePerson}))}}]),t}(s.a.Component);r.a.render(s.a.createElement(E,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.cac19f7b.chunk.js.map